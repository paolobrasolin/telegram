module Telegram
  module API
    module Bot
      module Methods
{%- for line in method.description %}
        # {{ line }}
        #
{%- endfor %}
{%- if method.parameters == empty %}
        def {{ method.snake_name }}
          url = build_url method_name: '{{ method.camel_name }}'
          Telegram::API::Bot::Client.post url: url, parameters: {}
        end
{% else %}
{%- for parameter in method.parameters %}
        # @param {{parameter.snake_name}} [{{parameter.signature}}] {{ parameter.description }}
{%- endfor %}
        def {{ method.snake_name }}(
{%- for parameter in method.parameters %}
          {{ parameter.snake_name }}:
            {%- unless parameter.required %} nil{% endunless -%}
            {%- unless parameter == method.parameters.last %},{% endunless %}
{%- endfor %}
        )
          url = build_url method_name: '{{ method.camel_name }}'
          parameters = method_parameters_hash __method__, binding
          Telegram::API::Bot::Client.post url: url, parameters: parameters
        end
{%- endif %}
      end
    end
  end
end
